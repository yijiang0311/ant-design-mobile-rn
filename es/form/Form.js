"use client";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"List",{enumerable:true,get:function get(){return _List.default;}});Object.defineProperty(exports,"useWatch",{enumerable:true,get:function get(){return _useWatch.default;}});Object.defineProperty(exports,"useForm",{enumerable:true,get:function get(){return _useForm3.default;}});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _rcFieldForm=_interopRequireDefault(require("rc-field-form"));var _List=_interopRequireDefault(require("rc-field-form/es/List"));var _useWatch=_interopRequireDefault(require("rc-field-form/es/useWatch"));var React=_interopRequireWildcard(require("react"));var _list=_interopRequireDefault(require("../list"));var _useLocale3=_interopRequireDefault(require("../locale-provider/useLocale"));var _DisabledContext=_interopRequireWildcard(require("../provider/DisabledContext"));var _context=require("./context");var _useForm3=_interopRequireDefault(require("./hooks/useForm"));var _useFormWarning=_interopRequireDefault(require("./hooks/useFormWarning"));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];}if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t;};var InternalForm=function InternalForm(props,ref){var contextDisabled=React.useContext(_DisabledContext.default);var _props$disabled=props.disabled,disabled=_props$disabled===void 0?contextDisabled:_props$disabled,form=props.form,labelStyle=props.labelStyle,_props$layout=props.layout,layout=_props$layout===void 0?'horizontal':_props$layout,requiredMark=props.requiredMark,name=props.name,feedbackIcons=props.feedbackIcons,style=props.style,restFormProps=__rest(props,["disabled","form","labelStyle","layout","requiredMark","name","feedbackIcons","style"]);var _useLocale=(0,_useLocale3.default)('Form'),_useLocale2=(0,_slicedToArray2.default)(_useLocale,1),locale=_useLocale2[0];if(__DEV__){(0,_useFormWarning.default)(props);}var mergedRequiredMark=(0,React.useMemo)(function(){if(requiredMark!==undefined){return requiredMark;}return true;},[requiredMark]);var _useForm=(0,_useForm3.default)(form),_useForm2=(0,_slicedToArray2.default)(_useForm,1),wrapForm=_useForm2[0];var __INTERNAL__=wrapForm.__INTERNAL__;__INTERNAL__.name=name;var formContextValue=(0,React.useMemo)(function(){return{name:name,labelStyle:labelStyle,layout:layout,requiredMark:mergedRequiredMark,itemRef:__INTERNAL__.itemRef,form:wrapForm,feedbackIcons:feedbackIcons};},[name,layout,mergedRequiredMark,wrapForm,feedbackIcons]);React.useImperativeHandle(ref,function(){return wrapForm;});return React.createElement(_DisabledContext.DisabledContextProvider,{disabled:disabled},React.createElement(_context.FormProvider,{validateMessages:locale.defaultValidateMessages},React.createElement(_context.FormContext.Provider,{value:formContextValue},React.createElement(_rcFieldForm.default,(0,_extends2.default)({id:name,component:_list.default,style:style},restFormProps,{name:name,form:wrapForm})))));};var Form=React.forwardRef(InternalForm);Form.displayName='Form';var _default=Form;exports.default=_default;